<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Вход</title>
  <style>
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: black;
      font-family: Arial, sans-serif;
      color: #fff;
      font-size: 28px;
      margin: 0;
      height: 100vh;
      line-height: 1.6;
    }
    #result {
      text-align: center;
      max-width: 80%;
    }
    input, button {
      padding: 10px;
      margin: 20px 5px;
      font-size: 24px;
    }
    button {
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div id="result"></div>
  <script>
    var OS = '';
    var verOS;
    var url;
    var isSupported = true;

    try {
      OS = Hisense_GetOSVersion();
    } catch (err) {
      if (typeof Hisense_GetDeviceID == 'function') {
        var str = Hisense_GetDeviceID();
        const macRegex = /^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/;
        if (macRegex.test(str)) {
          OS = 'U3';
        }
      } else if (typeof Hisense != 'undefined' || typeof HiBrowser != 'undefined') {
        OS = 'old';
      }
      // OS = 'U07'; // тестовое значение — раскомментируйте при отладке
    }

    switch (true) {
      case /^U09\./.test(OS):
        verOS = '9';
        url = '/9/index.html';
        break;

      case /^U08\./.test(OS):
        verOS = '8';
        url = '/8/index.html';
        break;

      case OS.indexOf("U4") >= 0:
        verOS = '4';
        url = '/4/index.html';
        break;

      case OS.indexOf("U3") >= 0:
        verOS = '3';
        url = '/3/index.html';
        break;

      case OS.indexOf("old") >= 0:
        verOS = 'динозавр';
        url = 'old/index.html';
        break;

      case OS.indexOf("U5") >= 0:
      case OS.indexOf("U05") >= 0:
        verOS = 'VIDAA 5 обнаружена, но пока не поддерживается';
        isSupported = false;
        break;

      case OS.indexOf("U6") >= 0:
      case OS.indexOf("U06") >= 0:
        verOS = 'VIDAA 6 обнаружена, но пока не поддерживается';
        isSupported = false;
        break;

      case OS.indexOf("U7") >= 0:
      case OS.indexOf("U07") >= 0:
        verOS = 'VIDAA 7 обнаружена, но пока не поддерживается';
        isSupported = false;
        break;

      default:
        verOS = 'К сожалению, ваше устройство не поддерживается';
        isSupported = false;
    }

    var support;
    if (isSupported) {
      support =
        '<div><h3>Отлично!</h3>Всё проверили — на вашем ТВ VIDAA ' + verOS + '</div>' +
        '<button onclick="window.location.href=\'' + url + '\'">Перейти в магазин</button>';
    } else {
      support = '<div>' + verOS + '</div>';
    }

    document.getElementById('result').innerHTML = support;
  </script>
</body>
</html>
